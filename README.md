
# Image Analysis with Chainlit and Ollama

This project enables you to analyze images using the `ollama` language model (`llama3.2-vision`) through a Chainlit interface. You can upload images, and the system will provide a brief description of the contents of each image.

---

## Table of Contents

- [Project Overview](#project-overview)
- [Project Structure](#project-structure)
- [Installation](#installation)
- [Configuration](#configuration)
- [Usage](#usage)
- [Requirements](#requirements)
- [File Descriptions](#file-descriptions)

---

## Project Overview

The goal of this project is to use the `ollama` language model to analyze and describe images via the Chainlit framework. The `ollama` model, specifically `llama3.2-vision`, processes image inputs and generates descriptive responses, which are displayed in a user-friendly chat interface.

---

## Project Structure

```plaintext
ðŸ“¦ project-root
â”œâ”€â”€ ðŸ“„ ui.py                # Main script for Chainlit to handle image analysis
â”œâ”€â”€ ðŸ“„ test.py              # Script to test direct calls to the ollama model
â”œâ”€â”€ ðŸ“„ chainlit.md          # Markdown file for Chainlit customizations
â”œâ”€â”€ ðŸ“„ chainlit.config.yaml # Configuration file for Chainlit
â”œâ”€â”€ ðŸ“„ requirements.txt     # Project dependencies
â””â”€â”€ ðŸ“„ README.md            # Documentation
```

---

## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/Med-Dev-99/llama3.2-vision-with-chainlit.git
   cd llama3.2-vision-with-chainlit
   ```

2. **Install dependencies**:
   Make sure you have Python installed. Then, run:
   ```bash
   pip install -r requirements.txt
   ```

3. **Install Ollama**:
   Install Ollama locally following the instructions on their [official website](https://ollama.com/download). Ensure `ollama` is correctly configured on your system for it to work with Chainlit.

---

## Configuration

1. **chainlit.config.yaml**: This file contains basic Chainlit configurations such as project name and server port.

2. **ollama Configuration**: 
   Ensure `ollama` is installed and configured correctly. This project uses the model `llama3.2-vision`. Download the model as follows:
   ```bash
   ollama pull llama3.2-vision
   ```

---

## Usage

1. **Run the Chainlit App**:
   Start the Chainlit application with the following command:
   ```bash
   chainlit run ui.py
   ```

2. **Testing Direct Ollama Calls**:
   You can run `test.py` to directly call the `ollama` model and test image analysis functionality:
   ```bash
   python test.py
   ```

3. **Access the Application**:
   Open a web browser and go to [http://localhost:8000](http://localhost:8000) to access the chat interface.

4. **Using the Interface**:
   Upload an image to the chat interface, and the model will analyze it and respond with a brief description.

---

## Requirements

Dependencies are listed in `requirements.txt`. Install them with:
```bash
pip install -r requirements.txt
```

### Key Dependencies:
- `chainlit`
- `ollama`
- `requests`
- `Pillow` (for image processing)

---

## File Descriptions

### `ui.py`
This script handles the main Chainlit application. It manages user interactions, image processing, and communication with the `ollama` model to generate image descriptions.

### `test.py`
A standalone script that tests the `ollama` modelâ€™s ability to describe images. You can use this to validate that the model is working independently before integrating it into Chainlit.

```python
# test.py
import ollama

with open('/path/to/your/image.jpg', 'rb') as file:
  response = ollama.chat(
    model='llama3.2-vision',
    messages=[
      {
        'role': 'user',
        'content': 'What is in this image?',
        'images': [file.read()],
      },
    ],
  )

print(response['message']['content'])
```

### `chainlit.md`
Markdown file that defines welcome messages and instructions within the Chainlit interface.

### `chainlit.config.yaml`
A YAML configuration file specifying settings for Chainlit, such as project name, language, and port.

```yaml
# chainlit.config.yaml
project_name: "Image Analysis with Chainlit"
port: 8000
language: "en-US"
```

### `requirements.txt`
Lists all required Python packages for this project.

```plaintext
chainlit
ollama
requests
Pillow
```

---

## Example

After running the application, upload an image through the interface, and the application will respond with a description generated by the `ollama` model.

**Sample Interaction**:
1. Upload an image of a city skyline.
2. The model returns: _"This image shows a city skyline with tall buildings under a partly cloudy sky."_

---

## Troubleshooting

If the model takes too long or does not respond:
- Check your `ollama` installation and ensure itâ€™s configured correctly.
- Verify the image size is reasonable. Large images may take longer to process.
- Refer to the terminal for error messages and logs.

---

## License

This project is open-source and licensed under the MIT License.
